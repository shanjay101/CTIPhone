{"id":"UQw6","dependencies":[{"name":"D:\\workspace\\WEBRTC\\package.json","includedInParent":true,"mtime":1661176492000},{"name":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\package.json","includedInParent":true,"mtime":1661512190728},{"name":"./utils","loc":{"line":1,"column":52,"index":52},"parent":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\lib\\core\\messages\\outgoing-response.js","resolved":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\lib\\core\\messages\\utils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.constructOutgoingResponse=t;var e=require(\"./utils\");function t(t,r){var s=\"\\r\\n\";if(r.statusCode<100||r.statusCode>699)throw new TypeError(\"Invalid statusCode: \"+r.statusCode);var a=r.reasonPhrase?r.reasonPhrase:(0,e.getReasonPhrase)(r.statusCode),o=\"SIP/2.0 \"+r.statusCode+\" \"+a+s;r.statusCode>=100&&r.statusCode,r.statusCode;var n=\"From: \"+t.getHeader(\"From\")+s,u=\"Call-ID: \"+t.callId+s,d=\"CSeq: \"+t.cseq+\" \"+t.method+s,g=t.getHeaders(\"via\").reduce(function(e,t){return e+\"Via: \"+t+s},\"\"),i=\"To: \"+t.getHeader(\"to\");if(r.statusCode>100&&!t.parseHeader(\"to\").hasParam(\"tag\")){var C=r.toTag;C||(C=(0,e.newTag)()),i+=\";tag=\"+C}i+=s;var c=\"\";r.supported&&(c=\"Supported: \"+r.supported.join(\", \")+s);var p=\"\";r.userAgent&&(p=\"User-Agent: \"+r.userAgent+s);var v=\"\";return r.extraHeaders&&(v=r.extraHeaders.reduce(function(e,t){return e+t.trim()+s},\"\")),o+=g,o+=n,o+=i,o+=d,o+=u,o+=c,o+=p,o+=v,r.body?(o+=\"Content-Type: \"+r.body.contentType+s,o+=\"Content-Length: \"+(0,e.utf8Length)(r.body.content)+s+s,o+=r.body.content):o+=\"Content-Length: 0\\r\\n\\r\\n\",{message:o}}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":126,"column":1},"generated":{"line":1,"column":102}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":1,"column":0},"generated":{"line":1,"column":104}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":1,"column":0},"generated":{"line":1,"column":108}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":1,"column":0},"generated":{"line":1,"column":110}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":1,"column":0},"generated":{"line":1,"column":118}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":10,"column":7},"generated":{"line":1,"column":129}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"constructOutgoingResponse","original":{"line":10,"column":16},"generated":{"line":1,"column":138}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":10,"column":42},"generated":{"line":1,"column":140}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":10,"column":51},"generated":{"line":1,"column":142}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":11,"column":4},"generated":{"line":1,"column":145}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":11,"column":10},"generated":{"line":1,"column":149}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":11,"column":17},"generated":{"line":1,"column":151}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":12,"column":4},"generated":{"line":1,"column":158}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":12,"column":8},"generated":{"line":1,"column":161}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":12,"column":16},"generated":{"line":1,"column":163}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":12,"column":29},"generated":{"line":1,"column":174}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":12,"column":36},"generated":{"line":1,"column":179}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":12,"column":44},"generated":{"line":1,"column":181}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":12,"column":57},"generated":{"line":1,"column":192}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":13,"column":8},"generated":{"line":1,"column":196}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":13,"column":14},"generated":{"line":1,"column":202}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"TypeError","original":{"line":13,"column":18},"generated":{"line":1,"column":206}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":13,"column":28},"generated":{"line":1,"column":216}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":13,"column":53},"generated":{"line":1,"column":239}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":13,"column":61},"generated":{"line":1,"column":241}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":15,"column":4},"generated":{"line":1,"column":253}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reasonPhrase","original":{"line":15,"column":10},"generated":{"line":1,"column":257}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":15,"column":25},"generated":{"line":1,"column":259}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reasonPhrase","original":{"line":15,"column":33},"generated":{"line":1,"column":261}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":15,"column":48},"generated":{"line":1,"column":274}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reasonPhrase","original":{"line":15,"column":56},"generated":{"line":1,"column":276}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":15,"column":71},"generated":{"line":1,"column":290}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"getReasonPhrase","original":{"line":15,"column":71},"generated":{"line":1,"column":292}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":15,"column":71},"generated":{"line":1,"column":294}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":15,"column":87},"generated":{"line":1,"column":311}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":15,"column":95},"generated":{"line":1,"column":313}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":21,"column":8},"generated":{"line":1,"column":325}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":21,"column":19},"generated":{"line":1,"column":327}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":21,"column":32},"generated":{"line":1,"column":338}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":21,"column":40},"generated":{"line":1,"column":340}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":21,"column":53},"generated":{"line":1,"column":351}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reasonPhrase","original":{"line":21,"column":59},"generated":{"line":1,"column":355}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":21,"column":74},"generated":{"line":1,"column":357}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":27,"column":8},"generated":{"line":1,"column":359}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":27,"column":16},"generated":{"line":1,"column":361}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":27,"column":30},"generated":{"line":1,"column":373}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":27,"column":37},"generated":{"line":1,"column":378}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":27,"column":45},"generated":{"line":1,"column":380}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":37,"column":8},"generated":{"line":1,"column":391}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":37,"column":16},"generated":{"line":1,"column":393}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":47,"column":4},"generated":{"line":1,"column":404}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"fromHeader","original":{"line":47,"column":10},"generated":{"line":1,"column":408}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":47,"column":23},"generated":{"line":1,"column":410}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":47,"column":34},"generated":{"line":1,"column":419}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"getHeader","original":{"line":47,"column":42},"generated":{"line":1,"column":421}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":47,"column":52},"generated":{"line":1,"column":431}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":47,"column":62},"generated":{"line":1,"column":439}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"callIdHeader","original":{"line":48,"column":10},"generated":{"line":1,"column":441}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":48,"column":25},"generated":{"line":1,"column":443}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":48,"column":39},"generated":{"line":1,"column":455}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"callId","original":{"line":48,"column":47},"generated":{"line":1,"column":457}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":48,"column":56},"generated":{"line":1,"column":464}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"cSeqHeader","original":{"line":49,"column":10},"generated":{"line":1,"column":466}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":49,"column":23},"generated":{"line":1,"column":468}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":49,"column":34},"generated":{"line":1,"column":477}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"cseq","original":{"line":49,"column":42},"generated":{"line":1,"column":479}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":49,"column":49},"generated":{"line":1,"column":484}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":49,"column":55},"generated":{"line":1,"column":488}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"method","original":{"line":49,"column":63},"generated":{"line":1,"column":490}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":49,"column":72},"generated":{"line":1,"column":497}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"viaHeaders","original":{"line":50,"column":10},"generated":{"line":1,"column":499}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":50,"column":23},"generated":{"line":1,"column":501}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"getHeaders","original":{"line":50,"column":31},"generated":{"line":1,"column":503}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":50,"column":42},"generated":{"line":1,"column":514}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reduce","original":{"line":50,"column":49},"generated":{"line":1,"column":521}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":50,"column":56},"generated":{"line":1,"column":528}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"previous","original":{"line":50,"column":57},"generated":{"line":1,"column":537}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"current","original":{"line":50,"column":67},"generated":{"line":1,"column":539}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":51,"column":8},"generated":{"line":1,"column":542}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"previous","original":{"line":51,"column":15},"generated":{"line":1,"column":549}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":51,"column":26},"generated":{"line":1,"column":551}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"current","original":{"line":51,"column":36},"generated":{"line":1,"column":559}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":51,"column":46},"generated":{"line":1,"column":561}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":52,"column":7},"generated":{"line":1,"column":564}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toHeader","original":{"line":64,"column":8},"generated":{"line":1,"column":568}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":64,"column":19},"generated":{"line":1,"column":570}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":64,"column":28},"generated":{"line":1,"column":577}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"getHeader","original":{"line":64,"column":36},"generated":{"line":1,"column":579}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":64,"column":46},"generated":{"line":1,"column":589}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":65,"column":4},"generated":{"line":1,"column":595}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":65,"column":8},"generated":{"line":1,"column":598}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"statusCode","original":{"line":65,"column":16},"generated":{"line":1,"column":600}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":65,"column":29},"generated":{"line":1,"column":611}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":65,"column":37},"generated":{"line":1,"column":617}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"parseHeader","original":{"line":65,"column":45},"generated":{"line":1,"column":619}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":65,"column":57},"generated":{"line":1,"column":631}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"hasParam","original":{"line":65,"column":63},"generated":{"line":1,"column":637}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":65,"column":72},"generated":{"line":1,"column":646}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":65,"column":80},"generated":{"line":1,"column":653}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":66,"column":8},"generated":{"line":1,"column":654}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toTag","original":{"line":66,"column":12},"generated":{"line":1,"column":658}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":66,"column":20},"generated":{"line":1,"column":660}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toTag","original":{"line":66,"column":28},"generated":{"line":1,"column":662}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toTag","original":{"line":67,"column":13},"generated":{"line":1,"column":668}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toTag","original":{"line":74,"column":12},"generated":{"line":1,"column":672}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":74,"column":20},"generated":{"line":1,"column":675}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"newTag","original":{"line":74,"column":20},"generated":{"line":1,"column":677}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":74,"column":20},"generated":{"line":1,"column":679}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toHeader","original":{"line":76,"column":8},"generated":{"line":1,"column":690}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":76,"column":20},"generated":{"line":1,"column":693}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toTag","original":{"line":76,"column":30},"generated":{"line":1,"column":701}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toHeader","original":{"line":78,"column":4},"generated":{"line":1,"column":703}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":78,"column":16},"generated":{"line":1,"column":706}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":87,"column":4},"generated":{"line":1,"column":708}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"supportedHeader","original":{"line":87,"column":8},"generated":{"line":1,"column":712}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":87,"column":26},"generated":{"line":1,"column":714}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":88,"column":8},"generated":{"line":1,"column":717}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"supported","original":{"line":88,"column":16},"generated":{"line":1,"column":719}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"supportedHeader","original":{"line":89,"column":8},"generated":{"line":1,"column":731}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":89,"column":26},"generated":{"line":1,"column":733}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":89,"column":42},"generated":{"line":1,"column":747}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"supported","original":{"line":89,"column":50},"generated":{"line":1,"column":749}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"join","original":{"line":89,"column":60},"generated":{"line":1,"column":759}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":89,"column":65},"generated":{"line":1,"column":764}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":89,"column":73},"generated":{"line":1,"column":770}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":92,"column":4},"generated":{"line":1,"column":773}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"userAgentHeader","original":{"line":92,"column":8},"generated":{"line":1,"column":777}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":92,"column":26},"generated":{"line":1,"column":779}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":93,"column":8},"generated":{"line":1,"column":782}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"userAgent","original":{"line":93,"column":16},"generated":{"line":1,"column":784}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"userAgentHeader","original":{"line":94,"column":8},"generated":{"line":1,"column":796}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":94,"column":26},"generated":{"line":1,"column":798}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":94,"column":43},"generated":{"line":1,"column":813}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"userAgent","original":{"line":94,"column":51},"generated":{"line":1,"column":815}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":94,"column":63},"generated":{"line":1,"column":825}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":96,"column":4},"generated":{"line":1,"column":828}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"extensionHeaders","original":{"line":96,"column":8},"generated":{"line":1,"column":832}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":96,"column":27},"generated":{"line":1,"column":834}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":125,"column":4},"generated":{"line":1,"column":837}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":97,"column":8},"generated":{"line":1,"column":844}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"extraHeaders","original":{"line":97,"column":16},"generated":{"line":1,"column":846}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"extensionHeaders","original":{"line":98,"column":8},"generated":{"line":1,"column":861}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":98,"column":27},"generated":{"line":1,"column":863}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"extraHeaders","original":{"line":98,"column":35},"generated":{"line":1,"column":865}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"reduce","original":{"line":98,"column":48},"generated":{"line":1,"column":878}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":98,"column":55},"generated":{"line":1,"column":885}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"previous","original":{"line":98,"column":56},"generated":{"line":1,"column":894}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"current","original":{"line":98,"column":66},"generated":{"line":1,"column":896}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":99,"column":12},"generated":{"line":1,"column":899}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"previous","original":{"line":99,"column":19},"generated":{"line":1,"column":906}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"current","original":{"line":99,"column":30},"generated":{"line":1,"column":908}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"trim","original":{"line":99,"column":38},"generated":{"line":1,"column":910}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":99,"column":47},"generated":{"line":1,"column":917}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":100,"column":11},"generated":{"line":1,"column":920}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":109,"column":4},"generated":{"line":1,"column":925}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"viaHeaders","original":{"line":109,"column":16},"generated":{"line":1,"column":928}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":110,"column":4},"generated":{"line":1,"column":930}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"fromHeader","original":{"line":110,"column":16},"generated":{"line":1,"column":933}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":111,"column":4},"generated":{"line":1,"column":935}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"toHeader","original":{"line":111,"column":16},"generated":{"line":1,"column":938}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":112,"column":4},"generated":{"line":1,"column":940}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"cSeqHeader","original":{"line":112,"column":16},"generated":{"line":1,"column":943}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":113,"column":4},"generated":{"line":1,"column":945}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"callIdHeader","original":{"line":113,"column":16},"generated":{"line":1,"column":948}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":114,"column":4},"generated":{"line":1,"column":950}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"supportedHeader","original":{"line":114,"column":16},"generated":{"line":1,"column":953}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":115,"column":4},"generated":{"line":1,"column":955}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"userAgentHeader","original":{"line":115,"column":16},"generated":{"line":1,"column":958}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":116,"column":4},"generated":{"line":1,"column":960}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"extensionHeaders","original":{"line":116,"column":16},"generated":{"line":1,"column":963}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":117,"column":8},"generated":{"line":1,"column":965}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"body","original":{"line":117,"column":16},"generated":{"line":1,"column":967}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":118,"column":8},"generated":{"line":1,"column":973}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":118,"column":20},"generated":{"line":1,"column":976}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":118,"column":39},"generated":{"line":1,"column":993}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"body","original":{"line":118,"column":47},"generated":{"line":1,"column":995}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"contentType","original":{"line":118,"column":52},"generated":{"line":1,"column":1000}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":118,"column":66},"generated":{"line":1,"column":1012}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":119,"column":8},"generated":{"line":1,"column":1014}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":119,"column":20},"generated":{"line":1,"column":1017}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":119,"column":41},"generated":{"line":1,"column":1037}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"utf8Length","original":{"line":119,"column":41},"generated":{"line":1,"column":1039}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":119,"column":41},"generated":{"line":1,"column":1041}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":119,"column":52},"generated":{"line":1,"column":1053}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"body","original":{"line":119,"column":60},"generated":{"line":1,"column":1055}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"content","original":{"line":119,"column":65},"generated":{"line":1,"column":1060}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":119,"column":76},"generated":{"line":1,"column":1069}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"CRLF","original":{"line":119,"column":83},"generated":{"line":1,"column":1071}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":120,"column":8},"generated":{"line":1,"column":1073}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"options","original":{"line":120,"column":20},"generated":{"line":1,"column":1076}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"body","original":{"line":120,"column":28},"generated":{"line":1,"column":1078}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"content","original":{"line":120,"column":33},"generated":{"line":1,"column":1083}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":123,"column":8},"generated":{"line":1,"column":1092}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":123,"column":20},"generated":{"line":1,"column":1095}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","original":{"line":125,"column":11},"generated":{"line":1,"column":1123}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"message","original":{"line":125,"column":13},"generated":{"line":1,"column":1124}},{"source":"node_modules/sip.js/lib/core/messages/outgoing-response.js","name":"response","original":{"line":125,"column":22},"generated":{"line":1,"column":1132}}],"sources":{"node_modules/sip.js/lib/core/messages/outgoing-response.js":"import { getReasonPhrase, newTag, utf8Length } from \"./utils\";\n/**\n * When a UAS wishes to construct a response to a request, it follows\n * the general procedures detailed in the following subsections.\n * Additional behaviors specific to the response code in question, which\n * are not detailed in this section, may also be required.\n * https://tools.ietf.org/html/rfc3261#section-8.2.6\n * @internal\n */\nexport function constructOutgoingResponse(message, options) {\n    const CRLF = \"\\r\\n\";\n    if (options.statusCode < 100 || options.statusCode > 699) {\n        throw new TypeError(\"Invalid statusCode: \" + options.statusCode);\n    }\n    const reasonPhrase = options.reasonPhrase ? options.reasonPhrase : getReasonPhrase(options.statusCode);\n    // SIP responses are distinguished from requests by having a Status-Line\n    // as their start-line.  A Status-Line consists of the protocol version\n    // followed by a numeric Status-Code and its associated textual phrase,\n    // with each element separated by a single SP character.\n    // https://tools.ietf.org/html/rfc3261#section-7.2\n    let response = \"SIP/2.0 \" + options.statusCode + \" \" + reasonPhrase + CRLF;\n    // One largely non-method-specific guideline for the generation of\n    // responses is that UASs SHOULD NOT issue a provisional response for a\n    // non-INVITE request.  Rather, UASs SHOULD generate a final response to\n    // a non-INVITE request as soon as possible.\n    // https://tools.ietf.org/html/rfc3261#section-8.2.6.1\n    if (options.statusCode >= 100 && options.statusCode < 200) {\n        // TODO\n    }\n    // When a 100 (Trying) response is generated, any Timestamp header field\n    // present in the request MUST be copied into this 100 (Trying)\n    // response.  If there is a delay in generating the response, the UAS\n    // SHOULD add a delay value into the Timestamp value in the response.\n    // This value MUST contain the difference between the time of sending of\n    // the response and receipt of the request, measured in seconds.\n    // https://tools.ietf.org/html/rfc3261#section-8.2.6.1\n    if (options.statusCode === 100) {\n        // TODO\n    }\n    // The From field of the response MUST equal the From header field of\n    // the request.  The Call-ID header field of the response MUST equal the\n    // Call-ID header field of the request.  The CSeq header field of the\n    // response MUST equal the CSeq field of the request.  The Via header\n    // field values in the response MUST equal the Via header field values\n    // in the request and MUST maintain the same ordering.\n    // https://tools.ietf.org/html/rfc3261#section-8.2.6.2\n    const fromHeader = \"From: \" + message.getHeader(\"From\") + CRLF;\n    const callIdHeader = \"Call-ID: \" + message.callId + CRLF;\n    const cSeqHeader = \"CSeq: \" + message.cseq + \" \" + message.method + CRLF;\n    const viaHeaders = message.getHeaders(\"via\").reduce((previous, current) => {\n        return previous + \"Via: \" + current + CRLF;\n    }, \"\");\n    // If a request contained a To tag in the request, the To header field\n    // in the response MUST equal that of the request.  However, if the To\n    // header field in the request did not contain a tag, the URI in the To\n    // header field in the response MUST equal the URI in the To header\n    // field; additionally, the UAS MUST add a tag to the To header field in\n    // the response (with the exception of the 100 (Trying) response, in\n    // which a tag MAY be present).  This serves to identify the UAS that is\n    // responding, possibly resulting in a component of a dialog ID.  The\n    // same tag MUST be used for all responses to that request, both final\n    // and provisional (again excepting the 100 (Trying)).\n    // https://tools.ietf.org/html/rfc3261#section-8.2.6.2\n    let toHeader = \"To: \" + message.getHeader(\"to\");\n    if (options.statusCode > 100 && !message.parseHeader(\"to\").hasParam(\"tag\")) {\n        let toTag = options.toTag;\n        if (!toTag) {\n            // Stateless UAS Behavior...\n            // o  To header tags MUST be generated for responses in a stateless\n            //    manner - in a manner that will generate the same tag for the\n            //    same request consistently.  For information on tag construction\n            //    see Section 19.3.\n            // https://tools.ietf.org/html/rfc3261#section-8.2.7\n            toTag = newTag(); // FIXME: newTag() currently generates random tags\n        }\n        toHeader += \";tag=\" + toTag;\n    }\n    toHeader += CRLF;\n    // FIXME: TODO: needs review... moved to InviteUserAgentServer (as it is specific to that)\n    // let recordRouteHeaders = \"\";\n    // if (request.method === C.INVITE && statusCode > 100 && statusCode <= 200) {\n    //   recordRouteHeaders = request.getHeaders(\"record-route\").reduce((previous, current) => {\n    //     return previous + \"Record-Route: \" + current + CRLF;\n    //   }, \"\");\n    // }\n    // FIXME: TODO: needs review...\n    let supportedHeader = \"\";\n    if (options.supported) {\n        supportedHeader = \"Supported: \" + options.supported.join(\", \") + CRLF;\n    }\n    // FIXME: TODO: needs review...\n    let userAgentHeader = \"\";\n    if (options.userAgent) {\n        userAgentHeader = \"User-Agent: \" + options.userAgent + CRLF;\n    }\n    let extensionHeaders = \"\";\n    if (options.extraHeaders) {\n        extensionHeaders = options.extraHeaders.reduce((previous, current) => {\n            return previous + current.trim() + CRLF;\n        }, \"\");\n    }\n    // The relative order of header fields with different field names is not\n    // significant.  However, it is RECOMMENDED that header fields which are\n    // needed for proxy processing (Via, Route, Record-Route, Proxy-Require,\n    // Max-Forwards, and Proxy-Authorization, for example) appear towards\n    // the top of the message to facilitate rapid parsing.\n    // https://tools.ietf.org/html/rfc3261#section-7.3.1\n    // response += recordRouteHeaders;\n    response += viaHeaders;\n    response += fromHeader;\n    response += toHeader;\n    response += cSeqHeader;\n    response += callIdHeader;\n    response += supportedHeader;\n    response += userAgentHeader;\n    response += extensionHeaders;\n    if (options.body) {\n        response += \"Content-Type: \" + options.body.contentType + CRLF;\n        response += \"Content-Length: \" + utf8Length(options.body.content) + CRLF + CRLF;\n        response += options.body.content;\n    }\n    else {\n        response += \"Content-Length: \" + 0 + CRLF + CRLF;\n    }\n    return { message: response };\n}\n"},"lineCount":null}},"error":null,"hash":"b3403760b405e7648124a7addf854a1d","cacheData":{"env":{}}}