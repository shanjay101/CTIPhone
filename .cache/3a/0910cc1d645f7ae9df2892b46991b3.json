{"id":"X5dr","dependencies":[{"name":"D:\\workspace\\WEBRTC\\package.json","includedInParent":true,"mtime":1661176492000},{"name":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\package.json","includedInParent":true,"mtime":1661512190728},{"name":"../core","loc":{"line":1,"column":31,"index":31},"parent":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\lib\\api\\referral.js","resolved":"D:\\workspace\\WEBRTC\\node_modules\\sip.js\\lib\\core\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Referral=void 0;var e=require(\"../core\");function r(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}function t(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}var n=function(){function t(e,i){r(this,t),this.incomingReferRequest=e,this.session=i}return i(t,[{key:\"referTo\",get:function(){var r=this.incomingReferRequest.message.parseHeader(\"refer-to\");if(!(r instanceof e.NameAddrHeader))throw new Error(\"Failed to parse Refer-To header.\");return r}},{key:\"referredBy\",get:function(){return this.incomingReferRequest.message.getHeader(\"referred-by\")}},{key:\"replaces\",get:function(){var e=this.referTo.uri.getHeader(\"replaces\");return e instanceof Array?e[0]:e}},{key:\"request\",get:function(){return this.incomingReferRequest.message}},{key:\"accept\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{statusCode:202};return this.incomingReferRequest.accept(e),Promise.resolve()}},{key:\"reject\",value:function(e){return this.incomingReferRequest.reject(e),Promise.resolve()}},{key:\"makeInviter\",value:function(e){if(this.inviter)return this.inviter;var r=this.referTo.uri.clone();r.clearHeaders();var t=((e=e||{}).extraHeaders||[]).slice(),i=this.replaces;i&&t.push(\"Replaces: \"+decodeURIComponent(i));var n=this.referredBy;return n&&t.push(\"Referred-By: \"+n),e.extraHeaders=t,this.inviter=this.session.userAgent._makeInviter(r,e),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}]),t}();exports.Referral=n;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":0}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":13}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":20}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":35}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":43}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":56}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":57}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":64}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":68}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":76}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":90}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":1,"column":0},"generated":{"line":1,"column":96}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":117}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":126}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":128}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":130}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":133}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":138}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":151}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":154}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":160}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":164}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":174}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":211}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":220}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":222}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":224}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":227}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":231}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":235}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":237}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":239}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":241}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":243}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":250}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":254}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":255}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":259}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":261}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":263}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":266}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":268}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":279}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":281}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":294}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":296}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":298}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":312}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":314}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":324}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":328}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":330}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":340}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":343}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":350}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":365}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":367}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":369}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":373}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":377}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":386}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":388}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":390}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":392}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":395}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":402}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":405}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":407}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":409}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":419}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":422}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":425}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":427}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":429}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":432}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":439}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":454}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":456}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":468}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":469}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":479}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":483}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Referral","original":{"line":6,"column":13},"generated":{"line":1,"column":485}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Referral","original":{"line":6,"column":13},"generated":{"line":1,"column":489}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Referral","original":{"line":6,"column":13},"generated":{"line":1,"column":491}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":8,"column":4},"generated":{"line":1,"column":502}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":8,"column":16},"generated":{"line":1,"column":511}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":8,"column":16},"generated":{"line":1,"column":513}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":8,"column":38},"generated":{"line":1,"column":515}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":8,"column":47},"generated":{"line":1,"column":518}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":8,"column":47},"generated":{"line":1,"column":520}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":8,"column":47},"generated":{"line":1,"column":525}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":9,"column":8},"generated":{"line":1,"column":528}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":9,"column":13},"generated":{"line":1,"column":533}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":9,"column":36},"generated":{"line":1,"column":554}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":10,"column":8},"generated":{"line":1,"column":556}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":10,"column":13},"generated":{"line":1,"column":561}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":10,"column":23},"generated":{"line":1,"column":569}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":571}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":578}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":580}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":582}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":583}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":584}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":588}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":12,"column":4},"generated":{"line":1,"column":598}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":12,"column":4},"generated":{"line":1,"column":602}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":13,"column":8},"generated":{"line":1,"column":613}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referTo","original":{"line":13,"column":14},"generated":{"line":1,"column":617}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":13,"column":24},"generated":{"line":1,"column":619}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":13,"column":29},"generated":{"line":1,"column":624}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"message","original":{"line":13,"column":50},"generated":{"line":1,"column":645}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"parseHeader","original":{"line":13,"column":58},"generated":{"line":1,"column":653}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":13,"column":70},"generated":{"line":1,"column":665}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":14,"column":8},"generated":{"line":1,"column":677}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referTo","original":{"line":14,"column":14},"generated":{"line":1,"column":682}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"NameAddrHeader","original":{"line":14,"column":33},"generated":{"line":1,"column":695}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":14,"column":12},"generated":{"line":1,"column":697}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":15,"column":12},"generated":{"line":1,"column":713}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":15,"column":18},"generated":{"line":1,"column":719}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Error","original":{"line":15,"column":22},"generated":{"line":1,"column":723}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":15,"column":28},"generated":{"line":1,"column":729}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":17,"column":8},"generated":{"line":1,"column":765}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referTo","original":{"line":17,"column":15},"generated":{"line":1,"column":772}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":776}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":777}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":781}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":19,"column":4},"generated":{"line":1,"column":794}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":19,"column":4},"generated":{"line":1,"column":798}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":20,"column":8},"generated":{"line":1,"column":809}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":20,"column":15},"generated":{"line":1,"column":816}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":20,"column":20},"generated":{"line":1,"column":821}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"message","original":{"line":20,"column":41},"generated":{"line":1,"column":842}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"getHeader","original":{"line":20,"column":49},"generated":{"line":1,"column":850}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":20,"column":59},"generated":{"line":1,"column":860}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":877}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":878}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":882}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":22,"column":4},"generated":{"line":1,"column":893}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":22,"column":4},"generated":{"line":1,"column":897}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":23,"column":8},"generated":{"line":1,"column":908}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"value","original":{"line":23,"column":14},"generated":{"line":1,"column":912}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":23,"column":22},"generated":{"line":1,"column":914}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referTo","original":{"line":23,"column":27},"generated":{"line":1,"column":919}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"uri","original":{"line":23,"column":35},"generated":{"line":1,"column":927}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"getHeader","original":{"line":23,"column":39},"generated":{"line":1,"column":931}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":23,"column":49},"generated":{"line":1,"column":941}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":24,"column":8},"generated":{"line":1,"column":953}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"value","original":{"line":24,"column":12},"generated":{"line":1,"column":960}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Array","original":{"line":24,"column":29},"generated":{"line":1,"column":973}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"value","original":{"line":25,"column":19},"generated":{"line":1,"column":979}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":25,"column":25},"generated":{"line":1,"column":981}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"value","original":{"line":27,"column":15},"generated":{"line":1,"column":984}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":988}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":989}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":993}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":30,"column":4},"generated":{"line":1,"column":1003}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":30,"column":4},"generated":{"line":1,"column":1007}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":31,"column":8},"generated":{"line":1,"column":1018}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1025}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":31,"column":20},"generated":{"line":1,"column":1030}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"message","original":{"line":31,"column":41},"generated":{"line":1,"column":1051}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1061}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1062}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1066}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":4},"generated":{"line":1,"column":1075}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":4},"generated":{"line":1,"column":1081}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":42},"generated":{"line":1,"column":1092}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":34,"column":11},"generated":{"line":1,"column":1096}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1098}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1108}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1115}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1123}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1127}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1137}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1140}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1150}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":21},"generated":{"line":1,"column":1153}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"statusCode","original":{"line":34,"column":23},"generated":{"line":1,"column":1154}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":34,"column":35},"generated":{"line":1,"column":1165}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":36,"column":8},"generated":{"line":1,"column":1170}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":35,"column":8},"generated":{"line":1,"column":1177}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":35,"column":13},"generated":{"line":1,"column":1182}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"accept","original":{"line":35,"column":34},"generated":{"line":1,"column":1203}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":35,"column":41},"generated":{"line":1,"column":1210}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Promise","original":{"line":36,"column":15},"generated":{"line":1,"column":1213}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"resolve","original":{"line":36,"column":23},"generated":{"line":1,"column":1221}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1233}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1234}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1238}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":39,"column":4},"generated":{"line":1,"column":1247}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":39,"column":4},"generated":{"line":1,"column":1253}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":39,"column":11},"generated":{"line":1,"column":1262}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":41,"column":8},"generated":{"line":1,"column":1265}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":40,"column":8},"generated":{"line":1,"column":1272}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"incomingReferRequest","original":{"line":40,"column":13},"generated":{"line":1,"column":1277}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"reject","original":{"line":40,"column":34},"generated":{"line":1,"column":1298}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":40,"column":41},"generated":{"line":1,"column":1305}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Promise","original":{"line":41,"column":15},"generated":{"line":1,"column":1308}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"resolve","original":{"line":41,"column":23},"generated":{"line":1,"column":1316}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1328}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1329}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1333}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":56,"column":4},"generated":{"line":1,"column":1347}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":56,"column":4},"generated":{"line":1,"column":1353}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":56,"column":16},"generated":{"line":1,"column":1362}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":57,"column":8},"generated":{"line":1,"column":1365}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":57,"column":12},"generated":{"line":1,"column":1368}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":57,"column":17},"generated":{"line":1,"column":1373}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":58,"column":12},"generated":{"line":1,"column":1381}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":58,"column":19},"generated":{"line":1,"column":1388}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":58,"column":24},"generated":{"line":1,"column":1393}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":60,"column":8},"generated":{"line":1,"column":1401}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"targetURI","original":{"line":60,"column":14},"generated":{"line":1,"column":1405}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":60,"column":26},"generated":{"line":1,"column":1407}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referTo","original":{"line":60,"column":31},"generated":{"line":1,"column":1412}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"uri","original":{"line":60,"column":39},"generated":{"line":1,"column":1420}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"clone","original":{"line":60,"column":43},"generated":{"line":1,"column":1424}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"targetURI","original":{"line":61,"column":8},"generated":{"line":1,"column":1432}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"clearHeaders","original":{"line":61,"column":18},"generated":{"line":1,"column":1434}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":63,"column":8},"generated":{"line":1,"column":1449}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":63,"column":14},"generated":{"line":1,"column":1453}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":62,"column":8},"generated":{"line":1,"column":1457}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":62,"column":18},"generated":{"line":1,"column":1459}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":62,"column":29},"generated":{"line":1,"column":1462}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":63,"column":38},"generated":{"line":1,"column":1466}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":63,"column":54},"generated":{"line":1,"column":1480}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"slice","original":{"line":63,"column":58},"generated":{"line":1,"column":1484}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"replaces","original":{"line":64,"column":14},"generated":{"line":1,"column":1492}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":64,"column":25},"generated":{"line":1,"column":1494}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"replaces","original":{"line":64,"column":30},"generated":{"line":1,"column":1499}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"replaces","original":{"line":65,"column":12},"generated":{"line":1,"column":1508}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":67,"column":12},"generated":{"line":1,"column":1511}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"push","original":{"line":67,"column":25},"generated":{"line":1,"column":1513}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":67,"column":30},"generated":{"line":1,"column":1518}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"decodeURIComponent","original":{"line":67,"column":45},"generated":{"line":1,"column":1531}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"replaces","original":{"line":67,"column":64},"generated":{"line":1,"column":1550}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":69,"column":8},"generated":{"line":1,"column":1554}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referredBy","original":{"line":69,"column":14},"generated":{"line":1,"column":1558}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":69,"column":27},"generated":{"line":1,"column":1560}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referredBy","original":{"line":69,"column":32},"generated":{"line":1,"column":1565}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":77,"column":8},"generated":{"line":1,"column":1576}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referredBy","original":{"line":70,"column":12},"generated":{"line":1,"column":1583}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":71,"column":12},"generated":{"line":1,"column":1586}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"push","original":{"line":71,"column":25},"generated":{"line":1,"column":1588}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":71,"column":30},"generated":{"line":1,"column":1593}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"referredBy","original":{"line":71,"column":48},"generated":{"line":1,"column":1609}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":73,"column":8},"generated":{"line":1,"column":1612}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":73,"column":16},"generated":{"line":1,"column":1614}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"extraHeaders","original":{"line":73,"column":31},"generated":{"line":1,"column":1627}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":74,"column":8},"generated":{"line":1,"column":1629}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":74,"column":13},"generated":{"line":1,"column":1634}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":74,"column":23},"generated":{"line":1,"column":1642}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":74,"column":28},"generated":{"line":1,"column":1647}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"userAgent","original":{"line":74,"column":36},"generated":{"line":1,"column":1655}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"_makeInviter","original":{"line":74,"column":46},"generated":{"line":1,"column":1665}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"targetURI","original":{"line":74,"column":59},"generated":{"line":1,"column":1678}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"options","original":{"line":74,"column":70},"generated":{"line":1,"column":1680}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":75,"column":8},"generated":{"line":1,"column":1683}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":75,"column":13},"generated":{"line":1,"column":1688}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"_referred","original":{"line":75,"column":21},"generated":{"line":1,"column":1696}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":75,"column":33},"generated":{"line":1,"column":1706}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":75,"column":38},"generated":{"line":1,"column":1711}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":76,"column":8},"generated":{"line":1,"column":1719}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"session","original":{"line":76,"column":13},"generated":{"line":1,"column":1724}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"_referral","original":{"line":76,"column":21},"generated":{"line":1,"column":1732}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":76,"column":33},"generated":{"line":1,"column":1742}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":76,"column":38},"generated":{"line":1,"column":1747}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":77,"column":15},"generated":{"line":1,"column":1755}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"inviter","original":{"line":77,"column":20},"generated":{"line":1,"column":1760}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1772}},{"source":"node_modules/sip.js/lib/api/referral.js","name":"Referral","original":{"line":6,"column":13},"generated":{"line":1,"column":1774}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1777}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1785}},{"source":"node_modules/sip.js/lib/api/referral.js","original":{"line":78,"column":5},"generated":{"line":1,"column":1794}}],"sources":{"node_modules/sip.js/lib/api/referral.js":"import { NameAddrHeader } from \"../core\";\n/**\n * A request to establish a {@link Session} elsewhere (incoming REFER).\n * @public\n */\nexport class Referral {\n    /** @internal */\n    constructor(incomingReferRequest, session) {\n        this.incomingReferRequest = incomingReferRequest;\n        this.session = session;\n    }\n    get referTo() {\n        const referTo = this.incomingReferRequest.message.parseHeader(\"refer-to\");\n        if (!(referTo instanceof NameAddrHeader)) {\n            throw new Error(\"Failed to parse Refer-To header.\");\n        }\n        return referTo;\n    }\n    get referredBy() {\n        return this.incomingReferRequest.message.getHeader(\"referred-by\");\n    }\n    get replaces() {\n        const value = this.referTo.uri.getHeader(\"replaces\");\n        if (value instanceof Array) {\n            return value[0];\n        }\n        return value;\n    }\n    /** Incoming REFER request message. */\n    get request() {\n        return this.incomingReferRequest.message;\n    }\n    /** Accept the request. */\n    accept(options = { statusCode: 202 }) {\n        this.incomingReferRequest.accept(options);\n        return Promise.resolve();\n    }\n    /** Reject the request. */\n    reject(options) {\n        this.incomingReferRequest.reject(options);\n        return Promise.resolve();\n    }\n    /**\n     * Creates an inviter which may be used to send an out of dialog INVITE request.\n     *\n     * @remarks\n     * This a helper method to create an Inviter which will execute the referral\n     * of the `Session` which was referred. The appropriate headers are set and\n     * the referred `Session` is linked to the new `Session`. Note that only a\n     * single instance of the `Inviter` will be created and returned (if called\n     * more than once a reference to the same `Inviter` will be returned every time).\n     *\n     * @param options - Options bucket.\n     * @param modifiers - Session description handler modifiers.\n     */\n    makeInviter(options) {\n        if (this.inviter) {\n            return this.inviter;\n        }\n        const targetURI = this.referTo.uri.clone();\n        targetURI.clearHeaders();\n        options = options || {};\n        const extraHeaders = (options.extraHeaders || []).slice();\n        const replaces = this.replaces;\n        if (replaces) {\n            // decodeURIComponent is a holdover from 2c086eb4. Not sure that it is actually necessary\n            extraHeaders.push(\"Replaces: \" + decodeURIComponent(replaces));\n        }\n        const referredBy = this.referredBy;\n        if (referredBy) {\n            extraHeaders.push(\"Referred-By: \" + referredBy);\n        }\n        options.extraHeaders = extraHeaders;\n        this.inviter = this.session.userAgent._makeInviter(targetURI, options);\n        this.inviter._referred = this.session;\n        this.session._referral = this.inviter;\n        return this.inviter;\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"3d2d9281ca6f29f8a7b4c5aacb36b1ed","cacheData":{"env":{}}}